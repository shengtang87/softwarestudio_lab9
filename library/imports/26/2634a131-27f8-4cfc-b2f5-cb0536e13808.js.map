{"version":3,"sources":["assets\\Scripts\\GameManager.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAyC,+BAAY;IAArD;QAAA,qEAmQC;QAhQG,qBAAe,GAAY,IAAI,CAAC;QAGhC,eAAS,GAAY,IAAI,CAAC;QAG1B,WAAK,GAAY,IAAI,CAAC;QAGtB,mBAAa,GAAY,IAAI,CAAC;QAG9B,kBAAY,GAAc,IAAI,CAAC;QAG/B,SAAG,GAAiB,IAAI,CAAC;QAGzB,WAAK,GAAiB,IAAI,CAAC;QAG3B,kBAAY,GAAiB,IAAI,CAAC;QAElC,WAAK,GAAG,CAAC,CAAC,OAAO,EAAE,cAAc,EAAE,eAAe,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,iBAAiB,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;QACp6C,cAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;QAEpX,cAAQ,GAAW,CAAC,CAAC;QACrB,mBAAa,GAAW,CAAC,CAAC;QAC1B,eAAS,GAAW,CAAC,CAAC;QAEtB,gBAAU,GAAW,EAAE,CAAC;QAOxB,kBAAY,GAAe,EAAE,CAAC;QAE9B,cAAQ,GAAG,KAAK,CAAC;QAEjB,UAAI,GAAW,KAAK,CAAC;;IAuNzB,CAAC;IArNG,4BAAM,GAAN;QACI,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAC/E,CAAC;IAED,2BAAK,GAAL;QACI,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,OAAO,EAAE,CAAA;QACd,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAED,oCAAc,GAAd;QACI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC1E,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;IAC5E,CAAC;IAED,4BAAM,GAAN,UAAO,EAAE;QACL,IAAG,CAAC,IAAI,CAAC,QAAQ,EAAC;YACd,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YAClB,IAAG,IAAI,CAAC,UAAU,IAAI,CAAC,EAAC;gBACpB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;SACJ;QAED,IAAI,IAAI,CAAC,SAAS,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACpC,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SACpB;IACL,CAAC;IAED,oCAAc,GAAd;QACI,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IAC/C,CAAC;IAED,+BAAS,GAAT,UAAU,KAAK;QACX,IAAG,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAC;YAC/B,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAC/B;IACL,CAAC;IAED,8BAAQ,GAAR;QACI,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;IAED,oCAAc,GAAd;QACI,IAAG,IAAI,CAAC,YAAY,CAAC,MAAM,IAAI,CAAC,EAAC;YAC7B,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;YAC3C,IAAI,MAAM,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;YAC9B,IAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YACnD,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtI,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACzI,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACnI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC1B,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAC;gBACvB,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;gBAC5F,IAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,EAAC;oBACnG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC7B;aACJ;YACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAC7B;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;IAC1C,CAAC;IAID,+BAAS,GAAT,UAAU,KAAK,EAAE,eAAe;QAC5B,IAAG,IAAI,CAAC,QAAQ;YAAE,OAAO;QAEzB,IAAG,eAAe,IAAI,KAAK,EAAC;YACxB,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAG,IAAI,CAAC,aAAa,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;gBAC5D,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;gBACvB,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAG,IAAI,CAAC,QAAQ,GAAG,EAAE,EAAC;oBAClB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;iBACtB;aACJ;YACD,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5D,IAAI,CAAC,QAAQ,EAAE,CAAC;YAEhB,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;aAAI;YACD,IAAI,MAAM,GAAG,CAAC,CAAC;YACf,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CACtC,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,CAAC,EACtC,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,CAAC,EACvC,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,CAAC,EACtC,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,CAAC,EACvC,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CACpC,CAAC,CAAC;YAEH,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAChC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EACd,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EACjB,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAClB,CAAC,CAAC;YACH,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/D;IACL,CAAC;IAED,8BAAQ,GAAR,UAAS,EAAE;QACP,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QAElD,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC;QACtB,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC;YACnB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SACvB;QACD,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACnF,CAAC;IAED,gCAAU,GAAV;QACI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;QAC1C,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC;QACjC,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;QAC7C,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAClF,SAAS,CAAC,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QACtD,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,8BAAQ,GAAR;QACI,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAED,6BAAO,GAAP;QACI,mDAAmD;QACnD,oDAAoD;QAEpD,mDAAmD;IAEvD,CAAC;IAED,6BAAO,GAAP;QACI,mDAAmD;QACnD,kBAAkB;QAElB,mDAAmD;IACvD,CAAC;IAED,gCAAU,GAAV;QACI,mDAAmD;QACnD,mDAAmD;QACnD,uBAAuB;QAEvB,mDAAmD;IACvD,CAAC;IAED,iCAAW,GAAX,UAAY,GAAW;QACnB,EAAE,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;QAEnC,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,IAAI,aAAa,GAAG,GAAG,CAAC;QACxB,IAAG,GAAG,IAAI,CAAC,EAAC;YACR,aAAa,GAAG,GAAG,CAAC;SACvB;aAAK,IAAG,GAAG,IAAI,CAAC,EAAC;YACd,aAAa,GAAG,GAAG,CAAC;SACvB;QACD,IAAI,UAAU,GAAG,aAAa,GAAG,GAAG,CAAC;QAErC,mDAAmD;QACnD,wCAAwC;QACxC,EAAE;QACF,mDAAmD;QACnD,4BAA4B;QAC5B,kDAAkD;QAClD,GAAG;QACH,kDAAkD;QAClD,GAAG;QACH,uDAAuD;QACvD,mDAAmD;QACnD,0BAA0B;QAC1B,GAAG;QACH,WAAW;QACX,2CAA2C;QAC3C,qCAAqC;QACrC,2CAA2C;QAC3C,qCAAqC;QACrC,GAAG;QACH,8BAA8B;QAC9B,GAAG;QACH,6CAA6C;QAC7C,mBAAmB;QACnB,GAAG;QACH,4CAA4C;QAC5C,GAAG;QACH,0FAA0F;QAC1F,GAAG;QACH,oDAAoD;QACpD,kDAAkD;QAClD,kDAAkD;QAClD,yDAAyD;QACzD,qBAAqB;QACrB,GAAG;QACH,kDAAkD;QAClD,+CAA+C;QAC/C,6CAA6C;QAC7C,GAAG;QACH,kDAAkD;QAClD,0DAA0D;QAC1D,+CAA+C;QAC/C,mDAAmD;IACvD,CAAC;IAED,iCAAW,GAAX;QACI,IAAI,CAAC,eAAe,CAAC,iBAAiB,EAAE,CAAC;IAC7C,CAAC;IA/PD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wDACc;IAGhC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACQ;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACI;IAGtB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sDACY;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;qDACW;IAG/B;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,CAAC;4CACL;IAGzB;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC;8CACN;IAG3B;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,CAAC;qDACI;IAxBjB,WAAW;QAD/B,OAAO;OACa,WAAW,CAmQ/B;IAAD,kBAAC;CAnQD,AAmQC,CAnQwC,EAAE,CAAC,SAAS,GAmQpD;kBAnQoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameManager extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    circleContainer: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    cover_red: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    cover: cc.Node = null;\r\n    \r\n    @property(cc.Node)\r\n    gameoverPanel: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    circlePrefab: cc.Prefab = null;\r\n\r\n    @property({type:cc.AudioClip})\r\n    bgm: cc.AudioClip = null;\r\n\r\n    @property({ type: cc.AudioClip })\r\n    bgm_2: cc.AudioClip = null;\r\n\r\n    @property({type:cc.AudioClip})\r\n    correctSound: cc.AudioClip = null;\r\n\r\n    level = [[\"level\", \"plusTime_sec\", \"minusTime_sec\", \"n_by_n\", \"nextLevel\", \"type\", \"type_option_arr\"], [\"level1\", \"1\", \"1\", \"2\", \"3\", \"CLOSER\", \"1\"], [\"level2\", \"0.98\", \"1\", \"3\", \"2\", \"CLOSER\", \"2\"], [\"level3\", \"0.96\", \"1\", \"3\", \"3\", \"CLOSER\", \"3\"], [\"level4\", \"0.94\", \"1\", \"3\", \"2\", \"CLOSER\", \"3\"], [\"level5\", \"0.92\", \"1\", \"4\", \"2\", \"CLOSER\", \"4\"], [\"level6\", \"0.9\", \"1\", \"4\", \"3\", \"CLOSER\", \"5\"], [\"level7\", \"0.88\", \"1\", \"4\", \"2\", \"CLOSER\", \"5\"], [\"level8\", \"0.86\", \"1\", \"4\", \"3\", \"CLOSER\", \"6\"], [\"level9\", \"0.84\", \"1\", \"5\", \"3\", \"CLOSER\", \"6\"], [\"level10\", \"0.82\", \"1\", \"5\", \"2\", \"CLOSER\", \"6\"], [\"level11\", \"0.8\", \"1\", \"5\", \"3\", \"CLOSER\", \"7\"], [\"level12\", \"0.78\", \"1.2\", \"5\", \"2\", \"CLOSER\", \"7\"], [\"level13\", \"0.76\", \"1.2\", \"5\", \"2\", \"CLOSER\", \"7\"], [\"level14\", \"0.74\", \"1.2\", \"5\", \"2\", \"CLOSER\", \"7\"], [\"level15\", \"0.72\", \"1.2\", \"6\", \"2\", \"CLOSER\", \"8\"], [\"level16\", \"0.7\", \"1.2\", \"6\", \"4\", \"CLOSER\", \"8\"], [\"level17\", \"0.68\", \"1.2\", \"6\", \"2\", \"CLOSER\", \"8\"], [\"level18\", \"0.66\", \"1.2\", \"6\", \"3\", \"CLOSER\", \"9\"], [\"level19\", \"0.64\", \"1.2\", \"6\", \"2\", \"CLOSER\", \"9\"], [\"level20\", \"0.62\", \"1.3\", \"7\", \"3\", \"CLOSER\", \"9\"], [\"level21\", \"0.6\", \"1.3\", \"7\", \"1\", \"CLOSER\", \"9\"], [\"level22\", \"0.58\", \"1.3\", \"7\", \"1\", \"CLOSER\", \"10\"], [\"level23\", \"0.56\", \"1.3\", \"7\", \"1\", \"CLOSER\", \"10\"], [\"level24\", \"0.54\", \"1.3\", \"7\", \"1\", \"CLOSER\", \"10\"], [\"level25\", \"0.52\", \"1.3\", \"7\", \"200\", \"CLOSER\", \"10\"], [\"MAX\", \"0\", \"1.3\", \"7\", \"80\", \"CLOSER\", \"10\"]];\r\n    colorSet = [[\"colorId\", \"color_r\", \"color_g\", \"color_b\"], [\"color0\", \"90\", \"45\", \"145\"], [\"color1\", \"145\", \"35\", \"135\"], [\"color2\", \"215\", \"15\", \"120\"], [\"color3\", \"230\", \"35\", \"45\"], [\"color4\", \"245\", \"150\", \"30\"], [\"color5\", \"250\", \"220\", \"5\"], [\"color6\", \"180\", \"210\", \"55\"], [\"color7\", \"5\", \"190\", \"115\"], [\"color8\", \"5\", \"150\", \"175\"], [\"color9\", \"24\", \"75\", \"169\"]];\r\n\r\n    curLevel: number = 1;\r\n    levelWinCount: number = 0;\r\n    gameLevel: number = 1;\r\n\r\n    remainTime: number = 20;\r\n\r\n    levelText: cc.Label;\r\n    timeText: cc.Label;\r\n\r\n    targetColor: cc.Color;\r\n    baseColor: cc.Color;\r\n    curCloserArr: cc.Color[] = [];\r\n\r\n    gameover = false;\r\n\r\n    flag:boolean = false;\r\n\r\n    onLoad() {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n    }\r\n\r\n    start() {\r\n        this.initProperties();\r\n        this.playBGM()\r\n        this.newRound();\r\n    }\r\n\r\n    initProperties(){\r\n        this.levelText = cc.find(\"Canvas/UI/LEVEL/number\").getComponent(cc.Label);\r\n        this.timeText = cc.find(\"Canvas/UI/TIME/number\").getComponent(cc.Label);\r\n    }\r\n\r\n    update(dt) {\r\n        if(!this.gameover){\r\n            this.updateUI(dt);\r\n            if(this.remainTime == 0){\r\n                this.gameover = true;\r\n                this.onGameover();\r\n            }\r\n        }\r\n\r\n        if (this.gameLevel >= 10 && !this.flag) {\r\n            this.stopBGM();\r\n            this.playAdvanceBGM();\r\n            this.flag = true;\r\n        }\r\n    }\r\n\r\n    playAdvanceBGM() {\r\n        cc.audioEngine.playMusic(this.bgm_2, true);\r\n    }\r\n\r\n    onKeyDown(event) {\r\n        if(event.keyCode == cc.macro.KEY.k){\r\n            this.getResult(null, \"Ans\");\r\n        }\r\n    }\r\n\r\n    newRound(){\r\n        this.checkCloserArr();\r\n        let row = parseInt(this.level[this.curLevel][3]);\r\n        this.spawnCircle(row);\r\n    }\r\n\r\n    checkCloserArr(){\r\n        if(this.curCloserArr.length <= 1){\r\n            let index = Math.floor(Math.random() * 10);\r\n            let indexL = (index + 9) % 10;\r\n            let p = parseInt(this.level[this.curLevel][6]) + 1;\r\n            let u = cc.color(parseInt(this.colorSet[index + 1][1]), parseInt(this.colorSet[index + 1][2]), parseInt(this.colorSet[index + 1][3]));\r\n            let d = cc.color(parseInt(this.colorSet[indexL + 1][1]), parseInt(this.colorSet[indexL + 1][2]), parseInt(this.colorSet[indexL + 1][3]));\r\n            let c = cc.color(Math.ceil((d.getR() - u.getR()) / p), Math.ceil((d.getG() - u.getG()) / p), Math.ceil((d.getB() - u.getB()) / p));\r\n            this.curCloserArr.length = 0;\r\n            this.curCloserArr.push(u);\r\n            for(let f = 1; f <= p; f++){\r\n                let m = cc.color(u.getR() + c.getR() * f, u.getG() + c.getG() * f, u.getB() + c.getB() * f);\r\n                if(Math.abs(d.getR() - m.getR()) + Math.abs(d.getG() - m.getG()) + Math.abs(d.getB() - m.getB()) >= 10){\r\n                    this.curCloserArr.push(m);\r\n                }\r\n            }\r\n            this.curCloserArr.push(d);\r\n        }\r\n        this.targetColor = this.curCloserArr.shift();\r\n        this.baseColor = this.curCloserArr[0];\r\n    }\r\n\r\n    \r\n\r\n    getResult(event, customEventData){\r\n        if(this.gameover) return;\r\n\r\n        if(customEventData == \"Ans\"){\r\n            this.gameLevel++;\r\n            this.levelWinCount++;\r\n            if(this.levelWinCount == parseInt(this.level[this.curLevel][4])){\r\n                this.levelWinCount = 0;\r\n                this.curLevel++;\r\n                if(this.curLevel > 26){\r\n                    this.curLevel = 26;\r\n                }\r\n            }\r\n            this.remainTime += parseFloat(this.level[this.curLevel][1]);\r\n            this.newRound();\r\n\r\n            this.playEffect();\r\n        }else{\r\n            let offset = 4;\r\n            this.circleContainer.runAction(cc.sequence(\r\n                cc.moveTo(0.05, cc.v2(offset, -110.5)),\r\n                cc.moveTo(0.05, cc.v2(-offset, -110.5)),\r\n                cc.moveTo(0.05, cc.v2(offset, -110.5)),\r\n                cc.moveTo(0.05, cc.v2(-offset, -110.5)),\r\n                cc.moveTo(0.05, cc.v2(0, -110.5))\r\n            ));\r\n\r\n            this.cover_red.runAction(cc.sequence(\r\n                cc.fadeIn(0.1),\r\n                cc.delayTime(0.1),\r\n                cc.fadeOut(0.1)\r\n            ));\r\n            this.remainTime -= parseFloat(this.level[this.curLevel][2]);\r\n        }\r\n    }\r\n\r\n    updateUI(dt){\r\n        this.levelText.string = this.gameLevel.toString();\r\n\r\n        this.remainTime -= dt;\r\n        if(this.remainTime < 0){\r\n            this.remainTime = 0;\r\n        }\r\n        this.timeText.string = this.remainTime.toFixed(2).toString().replace(\".\", \":\");\r\n    }\r\n\r\n    onGameover(){\r\n        this.cover.runAction(cc.fadeTo(0.2, 128));\r\n        this.gameoverPanel.active = true;\r\n        this.gameoverPanel.runAction(cc.fadeIn(0.2));\r\n        let LEVELText = this.gameoverPanel.getChildByName(\"LEVEL\").getComponent(cc.Label);\r\n        LEVELText.string = \"Lv. \" + this.gameLevel.toString();\r\n        this.stopBGM();\r\n    }\r\n\r\n    loadMenu(){\r\n        cc.director.loadScene(\"menu\");\r\n    }\r\n\r\n    playBGM(){\r\n        // ===================== TODO =====================\r\n        // 1. Play music. The audio clip to play is this.bgm\r\n        \r\n        // ================================================\r\n\r\n    }\r\n\r\n    stopBGM(){\r\n        // ===================== TODO =====================\r\n        // 1. Stop music. \r\n\r\n        // ================================================\r\n    }\r\n\r\n    playEffect(){\r\n        // ===================== TODO =====================\r\n        // 1. Play sound effect. The audio clip to play is \r\n        //    this.correctSound\r\n\r\n        // ================================================\r\n    }\r\n\r\n    spawnCircle(row: number){\r\n        cc.log(\"spawn \" + row + \"*\" + row);\r\n\r\n        this.clearCircle();\r\n\r\n        let containerSize = 380;\r\n        if(row == 2){\r\n            containerSize = 246;\r\n        }else if(row == 3){\r\n            containerSize = 369;\r\n        }\r\n        let circleSize = containerSize / row;\r\n\r\n        // ===================== TODO =====================\r\n        // 1. Update the size of circleContainer\r\n        //\r\n        // 2. Spawn [row]*[row] circles (this.circlePrefab)\r\n        //    under circleContainer.\r\n        //    (Be child nodes of the circleContainer node)\r\n        // \r\n        //    Hints:  cc.instantiate(), cc.Node.addChild()\r\n        // \r\n        // 3. All circles should be place like a square matrix.\r\n        //    There is no space between each circle in each\r\n        //    row and each column.\r\n        // \r\n        //    e.g. \r\n        //    A 3*3 matrix of circles is look like:\r\n        //    https://i.imgur.com/NuLEiyY.png\r\n        //    A 4*4 matrix of circles is look like:\r\n        //    https://i.imgur.com/Ij8GDvx.png\r\n        // \r\n        //    Hints:  Layout component\r\n        // \r\n        // 4. The width and height of each circle is \r\n        //    [circleSize].\r\n        // \r\n        // 5. Only ONE of the circles is the answer.\r\n        // \r\n        //    Hints:  Math.floor(Math.random() * 12) will return a random number between 0 and 12 \r\n        // \r\n        // 6. There is a child node named \"Background\" under\r\n        //    the circle node. You should change the color\r\n        //    of the \"Background\" node to this.targetColor\r\n        //    if it is the answer. Otherwise, change the color to\r\n        //    this.baseColor.\r\n        // \r\n        // 7. Add a click event to the Button component of\r\n        //    each circle so that when you click on it,\r\n        //    GameManager.getResult() will be called.\r\n        // \r\n        // 8. If the circle is the answer, customEventData\r\n        //    of the click event should be \"Ans\". Please refer to \r\n        //    GameManager.getResult() for more details.\r\n        // ================================================\r\n    }\r\n\r\n    clearCircle(){\r\n        this.circleContainer.removeAllChildren();\r\n    }\r\n}\r\n"]}